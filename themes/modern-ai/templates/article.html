{% extends "base.html" %}

{% block title %}{{ article.title }} | {{ SITENAME }}{% endblock %}
{% block description %}{{ article.summary|striptags|truncate(160) }}{% endblock %}
{% block og_title %}{{ article.title }}{% endblock %}
{% block og_description %}{{ article.summary|striptags|truncate(160) }}{% endblock %}
{% block og_image %}{% if article.image %}{{ article.image }}{% else %}{{ OG_IMAGE }}{% endif %}{% endblock %}

{% block content %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ SITEURL }}/{{ article.url }}"
  },
  "headline": "{{ article.title }}",
  "description": "{{ article.summary|striptags|truncate(160) }}",
  "image": [
    "{{ SITEURL }}/{% if article.image %}{{ article.image }}{% else %}{{ OG_IMAGE }}{% endif %}"
  ],
  "datePublished": "{{ article.date.isoformat() }}",
  "dateModified": "{{ article.modified.isoformat() if article.modified else article.date.isoformat() }}",
  "author": {
    "@type": "Person",
    "name": "{{ article.author }}",
    "url": "{{ SITEURL }}/{{ article.author.url }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ SITENAME }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ SITEURL }}/favicon.ico"
    }
  }
}
</script>
<article class="single-post">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
    </div>
    <h1>{{ article.title }}</h1>
  </header>

  <div class="post-content">
    {{ article.content }}
  </div>

  <div class="article-footer-meta">
    <p><strong>Category:</strong> <a href="{{ SITEURL }}/{{ article.category.url }}">{{ article.category }}</a></p>
    {% if article.tags %}
    <div class="tags-list">
      <strong>Tags:</strong>
      {% for tag in article.tags %}
      <span class="tag">#{{ tag }}</span>
      {% endfor %}
    </div>
    {% endif %}
  </div>

  <div class="post-footer">
    <a href="{{ SITEURL }}/" class="back-link">&larr; Back to Home</a>
  </div>
</article>
{% endblock %}